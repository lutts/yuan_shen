from datetime import datetime


class Ys_Timestamp:
    FORMAT = "%H:%M:%S.%f"

    def __init__(self, timestamp_str):
        try:
            self.t = datetime.strptime(timestamp_str, Ys_Timestamp.FORMAT)
        except:
            self.t = None

    def __sub__(self, other):
        if self.t is None:
            return "None"

        if other.t is None:
            return "None"

        minus = False
        if self.t > other.t:
            diff = self.t - other.t
        else:
            diff = other.t - self.t
            minus = True

        seconds = diff.seconds
        ms = diff.microseconds / 1000000
        # print(diff)
        # print("seconds: ", seconds)
        # print("ms:", ms)
        diff = seconds + ms
        if minus:
            diff = 0 - diff

        return round(diff, 3)

# print(Ys_Timestamp(""00:00:04.519"") - Ys_Timestamp(""00:00:05.586""))

timestamp_dict = {
    "BHJD4940": ["00:00:03.717", "00:00:03.950", "00:00:04.302",  # 切芙芙 - 点按 e - e出伤
                 "00:00:05.035", "00:00:05.152", # 第一刀刀光 - 第一刀出伤
                 "00:00:05.435", "00:00:05.518", # 第二刀刀光 - 第二刀出伤
                 "00:00:05.785",    # 切钟离
                 "00:00:06.902", "00:00:07.252", "00:00:07.685", # 切芙芙 - 第三刀重击开始 - 第三刀重击出伤
                 "00:00:08.318", "00:00:08.485", "00:00:08.568", # 第四刀刀光 - 第四刀出伤 - 第四刀扣血
                 "00:00:08.718", "00:00:08.885", "00:00:08.968", # 第五刀刀光 - 第五刀出伤 - 第五刀扣血
                 "00:00:09.068", "00:00:09.502", "00:00:09.602", # 第六刀重击开始 - 第六刀出伤 - 第六刀扣血
                 "00:00:09.968",    # 切钟离

                 "00:00:05.052", "00:00:05.752",    # 荒刀生成 - 荒刀出伤
                 "00:00:08.452", "00:00:09.018",    # 芒刀生成 - 芒刀出伤
                 ["00:00:05.252", "00:00:05.268"],  # 沙龙成员第一次扣血
                 "00:00:07.602",    # 第三刀重击后沙龙成员消失
                 ["00:00:10.452", "00:00:10.552"]], # 沙龙成员再次出现后第一次扣血

    "BHTR7918": ["00:00:03.200", "00:00:03.483", "00:00:03.850", 
                 "00:00:04.518", "00:00:04.635", 
                 "00:00:04.918", "00:00:05.018", 
                 "00:00:05.302",
                 "00:00:06.452", "00:00:06.802", "00:00:07.285", 
                 "00:00:07.918", "00:00:08.002", "00:00:08.185", 
                 "00:00:08.318", "00:00:08.402", "00:00:08.602",
                 "00:00:08.668", "00:00:09.102", "00:00:09.202", 
                 "00:00:09.518",

                 "00:00:04.535", "00:00:05.285",
                 "00:00:08.052", "00:00:08.768",
                 ["00:00:04.852", "00:00:04.968"],
                 "00:00:07.135",
                 ["00:00:09.985", "00:00:10.085"]],

    "BWUR7999": ["00:00:03.433", "00:00:03.633", "00:00:03.967", 
                 "00:00:04.635", "00:00:04.785", 
                 "00:00:05.035", "00:00:05.135", 
                 "00:00:05.368",
                 "00:00:06.752", "00:00:07.102", "00:00:07.518", 
                 "00:00:08.202", "00:00:08.335", "00:00:08.485", 
                 "00:00:08.602", "00:00:08.685", "00:00:08.868",
                 "00:00:08.952", "00:00:09.435", "00:00:09.535", 
                 "00:00:09.785",

                 "00:00:04.668", "00:00:05.335",
                 "00:00:08.335", "00:00:08.935",
                 ["00:00:05.035", "00:00:05.168"],
                 "00:00:07.452",
                 ["00:00:10.452"]],

    "CDSS6240": ["00:00:03.333", "00:00:03.517", "00:00:03.883", 
                 "00:00:04.585", "00:00:04.685", 
                 "00:00:04.985", "00:00:05.068", 
                 "00:00:05.268",
                 "00:00:06.752", "00:00:07.202", "00:00:07.685", 
                 "00:00:08.268", "00:00:08.352", "00:00:08.518", 
                 "00:00:08.668", "00:00:08.785", "00:00:08.985",
                 "00:00:09.018", "00:00:09.485", "00:00:09.552", 
                 "00:00:10.052",

                 "00:00:04.602", "00:00:05.352",
                 "00:00:00.000", "00:00:08.985",
                 ["00:00:04.852", "00:00:04.968"],
                 "00:00:07.552",
                 ["00:00:10.385", "00:00:10.485"]],

    "DCMX3753": ["00:00:04.402", "00:00:04.618", "00:00:04.985", 
                 "00:00:05.735", "00:00:05.818", 
                 "00:00:06.135", "00:00:06.218", 
                 "00:00:06.468",
                 "00:00:07.602", "00:00:07.968", "00:00:08.418", 
                 "00:00:09.085", "00:00:09.185", "00:00:09.335", 
                 "00:00:09.485", "00:00:09.585", "00:00:09.735",
                 "00:00:09.835", "00:00:10.335", "00:00:10.335", 
                 "00:00:10.735",

                 "00:00:05.768", "00:00:06.535",
                 "00:00:09.218", "00:00:09.835",
                 ["00:00:06.018", "00:00:06.118"],
                 "00:00:08.318",
                 ["00:00:11.152", "00:00:11.268"]],

    "DEGB3585": ["00:00:03.333", "00:00:03.517", "00:00:03.883", 
                 "00:00:04.568", "00:00:04.652", 
                 "00:00:04.968", "00:00:05.085", 
                 "00:00:05.268",
                 "00:00:06.402", "00:00:06.735", "00:00:07.168", 
                 "00:00:07.685", "00:00:07.768", "00:00:07.935", 
                 "00:00:08.085", "00:00:08.168", "00:00:08.368",
                 "00:00:08.435", "00:00:08.885", "00:00:08.968", 
                 "00:00:09.302",

                 "00:00:04.585", "00:00:05.235",
                 "00:00:07.818", "00:00:08.485",
                 ["00:00:04.868", "00:00:05.018"],
                 "00:00:07.085",
                 ["00:00:09.768", "00:00:09.885"]],

    "DFNO8102": ["00:00:03.217", "00:00:03.483", "00:00:03.850", 
                 "00:00:04.652", "00:00:04.818", 
                 "00:00:05.052", "00:00:05.185", 
                 "00:00:05.218",
                 "00:00:06.602", "00:00:06.935", "00:00:07.385", 
                 "00:00:08.085", "00:00:08.185", "00:00:08.385", 
                 "00:00:08.485", "00:00:08.568", "00:00:08.785",
                 "00:00:08.835", "00:00:09.302", "00:00:09.368", 
                 "00:00:09.668",

                 "00:00:04.668", "00:00:05.385",
                 "00:00:08.218", "00:00:08.885",
                 ["00:00:04.885", "00:00:04.985", "00:00:05.002"],
                 "00:00:07.285",
                 ["00:00:10.168", "00:00:10.268"]],

    "DHGR5935": ["00:00:03.067", "00:00:03.433", "00:00:03.800", 
                 "00:00:04.502", "00:00:04.618", 
                 "00:00:04.902", "00:00:04.985", 
                 "00:00:05.152",
                 "00:00:06.702", "00:00:07.068", "00:00:07.485", 
                 "00:00:08.152", "00:00:08.285", "00:00:08.468", 
                 "00:00:08.552", "00:00:08.668", "00:00:08.768",
                 "00:00:08.902", "00:00:09.385", "00:00:09.402", 
                 "00:00:09.852",

                 "00:00:04.518", "00:00:05.302",
                 "00:00:08.285", "00:00:08.885",
                 ["00:00:04.835", "00:00:04.852", "00:00:04.935"],
                 "00:00:07.418",
                 ["00:00:10.268", "00:00:10.352"]],

    "DUKY9447": ["00:00:04.227", "00:00:04.527", "00:00:04.877", 
                 "00:00:05.610", "00:00:05.777", 
                 "00:00:06.010", "00:00:06.127", 
                 "00:00:06.327",
                 "00:00:07.543", "00:00:08.010", "00:00:08.460", 
                 "00:00:09.060", "00:00:09.160", "00:00:09.360", 
                 "00:00:09.460", "00:00:09.560", "00:00:09.777",
                 "00:00:09.810", "00:00:10.293", "00:00:10.360", 
                 "00:00:10.743",

                 "00:00:05.627", "00:00:06.427",
                 "00:00:00.000", "00:00:09.777",
                 ["00:00:05.877", "00:00:05.977"],
                 "00:00:08.360",
                 ["00:00:11.143", "00:00:11.243"]],

    "DUPA7795": ["00:00:05.118", "00:00:05.402", "00:00:05.768", 
                 "00:00:06.535", "00:00:06.618", 
                 "00:00:06.935", "00:00:07.018", 
                 "00:00:07.302",
                 "00:00:08.668", "00:00:09.068", "00:00:09.502", 
                 "00:00:10.018", "00:00:10.102", "00:00:10.268", 
                 "00:00:10.418", "00:00:10.518", "00:00:10.718",
                 "00:00:10.768", "00:00:11.218", "00:00:11.318", 
                 "00:00:11.735",

                 "00:00:06.568", "00:00:07.302",
                 "00:00:00.000", "00:00:10.802",
                 ["00:00:06.718", "00:00:06.835"],
                 "00:00:09.418",
                 ["00:00:12.085", "00:00:12.187"]],

    "EUWP8011": ["00:00:02.933", "00:00:03.100", "00:00:03.450", 
                 "00:00:04.168", "00:00:04.318", 
                 "00:00:04.568", "00:00:04.735", 
                 "00:00:04.852",
                 "00:00:05.985", "00:00:06.318", "00:00:06.802", 
                 "00:00:07.285", "00:00:07.368", "00:00:00.000", 
                 "00:00:07.685", "00:00:07.802", "00:00:08.002",
                 "00:00:08.035", "00:00:08.518", "00:00:08.602", 
                 "00:00:08.885",

                 "00:00:04.185", "00:00:04.852",
                 "00:00:00.000", "00:00:08.002",
                 ["00:00:04.418", "00:00:04.518"],
                 "00:00:06.668",
                 ["00:00:09.485"]],

    "EVWB4165": ["00:00:03.783", "00:00:03.883", "00:00:04.235", 
                 "00:00:04.935", "00:00:05.052", 
                 "00:00:05.335", "00:00:05.452", 
                 "00:00:05.585",
                 "00:00:06.985", "00:00:07.368", "00:00:07.835", 
                 "00:00:08.518", "00:00:08.702", "00:00:08.768", 
                 "00:00:08.918", "00:00:09.035", "00:00:09.235",
                 "00:00:09.285", "00:00:09.768", "00:00:09.835", 
                 "00:00:10.085",

                 "00:00:04.952", "00:00:05.585",
                 "00:00:00.000", "00:00:09.235",
                 ["00:00:05.235"],
                 "00:00:07.718",
                 ["00:00:10.735"]],

    "FQJO9781": ["00:00:03.850", "00:00:04.000", "00:00:04.368", 
                 "00:00:05.068", "00:00:05.168", 
                 "00:00:05.468", "00:00:05.568", 
                 "00:00:05.768",
                 "00:00:07.218", "00:00:07.568", "00:00:07.985", 
                 "00:00:08.702", "00:00:08.785", "00:00:09.002", 
                 "00:00:09.102", "00:00:09.185", "00:00:09.385",
                 "00:00:09.452", "00:00:09.902", "00:00:09.985", 
                 "00:00:00.000",

                 "00:00:05.085", "00:00:05.818",
                 "00:00:08.835", "00:00:09.502",
                 ["00:00:05.335", "00:00:05.485"],
                 "00:00:07.918",
                 ["00:00:10.802", "00:00:10.902"]],

    "GMEG6679": ["00:00:03.750", "00:00:04.085", "00:00:04.435", 
                 "00:00:05.285", "00:00:05.352", 
                 "00:00:05.685", "00:00:05.752", 
                 "00:00:06.035",
                 "00:00:07.152", "00:00:07.652", "00:00:08.085", 
                 "00:00:08.735", "00:00:08.852", "00:00:08.952", 
                 "00:00:09.135", "00:00:09.218", "00:00:09.352",
                 "00:00:09.485", "00:00:10.002", "00:00:10.002", 
                 "00:00:10.368",

                 "00:00:05.302", "00:00:06.002",
                 "00:00:08.868", "00:00:09.452",
                 ["00:00:05.402", "00:00:05.518"],
                 "00:00:08.002",
                 ["00:00:10.802", "00:00:10.902"]],

    "HPKK2312": ["00:00:03.683", "00:00:03.900", "00:00:04.235", 
                 "00:00:05.002", "00:00:05.168", 
                 "00:00:05.402", "00:00:05.535", 
                 "00:00:05.785",
                 "00:00:06.902", "00:00:07.402", "00:00:07.835", 
                 "00:00:08.435", "00:00:08.518", "00:00:08.735", 
                 "00:00:08.835", "00:00:08.935", "00:00:09.135",
                 "00:00:09.185", "00:00:09.652", "00:00:09.735", 
                 "00:00:10.052",

                 "00:00:05.018", "00:00:05.768",
                 "00:00:08.568", "00:00:09.235",
                 ["00:00:05.218", "00:00:05.235", "00:00:05.335"],
                 "00:00:07.752",
                 ["00:00:10.518", "00:00:10.618"]],

    "IBCB7646": ["00:00:03.483", "00:00:03.783", "00:00:04.152", 
                 "00:00:04.918", "00:00:05.018", 
                 "00:00:05.318", "00:00:05.435", 
                 "00:00:05.652",
                 "00:00:06.768", "00:00:07.302", "00:00:07.735", 
                 "00:00:08.335", "00:00:08.452", "00:00:08.635", 
                 "00:00:08.735", "00:00:08.835", "00:00:09.018",
                 "00:00:09.085", "00:00:09.552", "00:00:09.652", 
                 "00:00:10.068",

                 "00:00:04.935", "00:00:05.635",
                 "00:00:00.000", "00:00:09.118",
                 ["00:00:05.152", "00:00:05.218"],
                 "00:00:07.652",
                 ["00:00:10.485", "00:00:10.618"]],

    "JKNV7540": ["00:00:03.383", "00:00:03.617", "00:00:03.950", 
                 "00:00:04.652", "00:00:04.752", 
                 "00:00:05.052", "00:00:05.135", 
                 "00:00:05.352",
                 "00:00:06.485", "00:00:07.085", "00:00:07.502", 
                 "00:00:08.135", "00:00:08.218", "00:00:08.385", 
                 "00:00:08.535", "00:00:08.635", "00:00:08.835",
                 "00:00:08.885", "00:00:09.352", "00:00:09.452", 
                 "00:00:09.768",

                 "00:00:04.685", "00:00:05.352",
                 "00:00:08.268", "00:00:08.935",
                 ["00:00:04.952"],
                 "00:00:07.435",
                 ["00:00:10.202", "00:00:10.302"]],

    "JWQU3577": ["00:00:03.667", "00:00:03.850", "00:00:04.235", 
                 "00:00:04.985", "00:00:05.068", 
                 "00:00:05.385", "00:00:05.485", 
                 "00:00:05.635",
                 "00:00:06.885", "00:00:07.252", "00:00:07.685", 
                 "00:00:08.318", "00:00:08.485", "00:00:08.585", 
                 "00:00:08.718", "00:00:08.885", "00:00:08.985",
                 "00:00:09.068", "00:00:09.502", "00:00:09.602", 
                 "00:00:09.935",

                 "00:00:05.002", "00:00:05.785",
                 "00:00:08.452", "00:00:09.085",
                 ["00:00:05.185", "00:00:05.302"],
                 "00:00:07.602",
                 ["00:00:10.435", "00:00:10.535"]],

    "KHRR4232": ["00:00:03.383", "00:00:03.583", "00:00:03.950", 
                 "00:00:04.718", "00:00:04.868", 
                 "00:00:05.118", "00:00:05.202", 
                 "00:00:05.468",
                 "00:00:06.585", "00:00:06.968", "00:00:07.418", 
                 "00:00:08.052", "00:00:08.218", "00:00:08.318", 
                 "00:00:08.452", "00:00:08.568", "00:00:08.718",
                 "00:00:08.802", "00:00:09.235", "00:00:09.318", 
                 "00:00:09.735",

                 "00:00:04.735", "00:00:05.452",
                 "00:00:08.185", "00:00:08.835",
                 ["00:00:04.885"],
                 "00:00:07.318",
                 ["00:00:10.218", "00:00:10.235"]],

    "KLBO0148": ["00:00:03.733", "00:00:03.917", "00:00:04.285", 
                 "00:00:05.135", "00:00:05.302", 
                 "00:00:05.535", "00:00:05.635", 
                 "00:00:05.785",
                 "00:00:07.152", "00:00:07.568", "00:00:08.018", 
                 "00:00:08.635", "00:00:08.718", "00:00:08.918", 
                 "00:00:09.035", "00:00:09.118", "00:00:09.318",
                 "00:00:09.385", "00:00:09.835", "00:00:09.918", 
                 "00:00:10.235",

                 "00:00:05.152", "00:00:05.785",
                 "00:00:08.768", "00:00:09.418",
                 ["00:00:05.318", "00:00:05.435"],
                 "00:00:07.918",
                 ["00:00:10.752", "00:00:10.835"]],

    "MMCL8805": ["00:00:03.700", "00:00:03.817", "00:00:04.185", 
                 "00:00:04.968", "00:00:05.135", 
                 "00:00:05.368", "00:00:05.468", 
                 "00:00:05.635",
                 "00:00:06.652", "00:00:07.118", "00:00:07.552", 
                 "00:00:08.202", "00:00:08.285", "00:00:08.485", 
                 "00:00:08.602", "00:00:08.685", "00:00:08.835",
                 "00:00:08.952", "00:00:09.418", "00:00:09.518", 
                 "00:00:09.818",

                 "00:00:04.985", "00:00:05.685",
                 "00:00:08.335", "00:00:08.935",
                 ["00:00:05.235"],
                 "00:00:07.468",
                 ["00:00:10.285", "00:00:10.385"]],

    "MNSA0943": ["00:00:03.950", "00:00:04.133", "00:00:04.518", 
                 "00:00:05.218", "00:00:05.335", 
                 "00:00:05.618", "00:00:05.735", 
                 "00:00:05.902",
                 "00:00:07.018", "00:00:07.385", "00:00:07.818", 
                 "00:00:08.585", "00:00:08.702", "00:00:08.818", 
                 "00:00:08.985", "00:00:09.118", "00:00:09.218",
                 "00:00:09.335", "00:00:09.835", "00:00:09.868", 
                 "00:00:10.318",

                 "00:00:05.235", "00:00:05.885",
                 "00:00:08.718", "00:00:09.318",
                 ["00:00:05.518", "00:00:05.602"],
                 "00:00:07.735",
                 ["00:00:10.702", "00:00:10.818"]],

    "MXJR1135": ["00:00:03.717", "00:00:04.002", "00:00:04.352", 
                 "00:00:05.135", "00:00:05.302", 
                 "00:00:05.535", "00:00:05.668", 
                 "00:00:05.835",
                 "00:00:06.952", "00:00:07.368", "00:00:07.835", 
                 "00:00:08.418", "00:00:08.518", "00:00:08.668", 
                 "00:00:08.818", "00:00:08.918", "00:00:09.052",
                 "00:00:09.102", "00:00:09.552", "00:00:09.635", 
                 "00:00:10.018",

                 "00:00:05.152", "00:00:05.835",
                 "00:00:08.552", "00:00:09.152",
                 ["00:00:05.368"],
                 "00:00:07.718",
                 ["00:00:10.452", "00:00:10.535"]],

    "OASL9163": ["00:00:03.883", "00:00:04.035", "00:00:04.402", 
                 "00:00:05.168", "00:00:05.252", 
                 "00:00:05.568", "00:00:05.652", 
                 "00:00:05.818",
                 "00:00:06.918", "00:00:07.235", "00:00:07.668", 
                 "00:00:08.318", "00:00:08.452", "00:00:00:000", 
                 "00:00:08.718", "00:00:08.868", "00:00:08.968",
                 "00:00:09.068", "00:00:09.502", "00:00:09.602", 
                 "00:00:09.868",

                 "00:00:05.185", "00:00:05.985",
                 "00:00:08.452", "00:00:09.068",
                 ["00:00:05.402"],
                 "00:00:07.585",
                 ["00:00:10.418", "00:00:10.535"]],

    "OXWY6254": ["00:00:03.750", "00:00:03.900", "00:00:04.268", 
                 "00:00:05.002", "00:00:05.152", 
                 "00:00:05.402", "00:00:05.552", 
                 "00:00:05.768",
                 "00:00:06.885", "00:00:07.535", "00:00:07.952", 
                 "00:00:08.868", "00:00:09.018", "00:00:09.102", 
                 "00:00:09.268", "00:00:09.418", "00:00:09.535",
                 "00:00:09.635", "00:00:10.118", "00:00:10.152",  
                 "00:00:00.000",

                 "00:00:05.018", "00:00:05.735",
                 "00:00:00.000", "00:00:09.635",
                 ["00:00:05.252", "00:00:05.352"],
                 "00:00:07.885",
                 ["00:00:00.000"]],

    "OZGY5014": ["00:00:03.600", "00:00:03.817", "00:00:04.185", 
                 "00:00:04.802", "00:00:04.902", 
                 "00:00:05.202", "00:00:05.318", 
                 "00:00:05.635",
                 "00:00:06.802", "00:00:07.168", "00:00:07.602", 
                 "00:00:08.318", "00:00:08.402", "00:00:08.568", 
                 "00:00:08.718", "00:00:08.818", "00:00:09.018",
                 "00:00:09.068", "00:00:09.535", "00:00:09.602", 
                 "00:00:09.885",

                 "00:00:04.818", "00:00:05.485",
                 "00:00:08.452", "00:00:09.118",
                 ["00:00:05.135", "00:00:05.252"],
                 "00:00:07.518",
                 ["00:00:10.418", "00:00:10.518"]],

    "QUXZ9023": ["00:00:03.650", "00:00:03.850", "00:00:04.202", 
                 "00:00:04.968", "00:00:05.102", 
                 "00:00:05.368", "00:00:05.518", 
                 "00:00:05.718",
                 "00:00:06.968", "00:00:07.318", "00:00:07.785", 
                 "00:00:08.302", "00:00:08.435", "00:00:08.585", 
                 "00:00:08.702", "00:00:08.785", "00:00:08.985",
                 "00:00:09.052", "00:00:09.485", "00:00:09.585", 
                 "00:00:10.002",

                 "00:00:04.985", "00:00:05.718",
                 "00:00:00.000", "00:00:09.085",
                 ["00:00:05.218"],
                 "00:00:07.668",
                 ["00:00:10.518"]],

    "RMEW5747": ["00:00:03.233", "00:00:03.433", "00:00:03.817", 
                 "00:00:04.635", "00:00:04.802", 
                 "00:00:05.035", "00:00:05.118", 
                 "00:00:05.352",
                 "00:00:06.468", "00:00:06.885", "00:00:07.368", 
                 "00:00:08.002", "00:00:08.068", "00:00:08.285", 
                 "00:00:08.402", "00:00:08.485", "00:00:08.718",
                 "00:00:08.752", "00:00:09.218", "00:00:09.318", 
                 "00:00:09.635",

                 "00:00:04.668", "00:00:05.352",
                 "00:00:08.135", "00:00:08.718",
                 ["00:00:04.802", "00:00:04.818", "00:00:04.902"],
                 "00:00:07.235",
                 ["00:00:10.202", "00:00:10.218"]],

    "SVBA7014": ["00:00:04.318", "00:00:04.585", "00:00:04.935", 
                 "00:00:05.768", "00:00:05.885", 
                 "00:00:06.168", "00:00:06.285", 
                 "00:00:06.502",
                 "00:00:07.635", "00:00:08.035", "00:00:08.468", 
                 "00:00:09.168", "00:00:09.252", "00:00:09.468", 
                 "00:00:09.568", "00:00:09.668", "00:00:09.868",
                 "00:00:09.918", "00:00:10.368", "00:00:10.452", 
                 "00:00:10.852",

                 "00:00:05.785", "00:00:06.485",
                 "00:00:09.302", "00:00:09.968",
                 ["00:00:05.885", "00:00:06.002"],
                 "00:00:08.385",
                 ["00:00:11.385"]],

    "TKBH0147": ["00:00:03.150", "00:00:03.350", "00:00:03.700", 
                 "00:00:04.518", "00:00:04.685", 
                 "00:00:04.918", "00:00:05.002", 
                 "00:00:05.185",
                 "00:00:06.302", "00:00:06.652", "00:00:07.152", 
                 "00:00:07.652", "00:00:07.752", "00:00:00.000", 
                 "00:00:08.052", "00:00:08.152", "00:00:08.335",
                 "00:00:08.402", "00:00:08.868", "00:00:08.935", 
                 "00:00:09.152",

                 "00:00:04.535", "00:00:05.268",
                 "00:00:00.000", "00:00:08.452",
                 ["00:00:04.685"],
                 "00:00:07.002",
                 ["00:00:09.735", "00:00:09.868"]],

    "TNAU3401": ["00:00:04.068", "00:00:04.285", "00:00:04.635", 
                 "00:00:05.535", "00:00:05.635", 
                 "00:00:05.935", "00:00:06.068", 
                 "00:00:06.268",
                 "00:00:07.552", "00:00:08.068", "00:00:08.535", 
                 "00:00:09.202", "00:00:09.368", "00:00:09.435", 
                 "00:00:09.602", "00:00:09.718", "00:00:09.835",
                 "00:00:09.952", "00:00:10.452", "00:00:10.485", 
                 "00:00:10.868",


                 "00:00:05.552", "00:00:06.268",
                 "00:00:09.335", "00:00:09.935",
                 ["00:00:05.752"],
                 "00:00:08.418",
                 ["00:00:11.302", "00:00:11.418"]],

    "TPZU0564": ["00:00:03.600", "00:00:03.717", "00:00:04.068", 
                 "00:00:04.902", "00:00:04.985", 
                 "00:00:05.302", "00:00:05.418", 
                 "00:00:05.618",
                 "00:00:06.885", "00:00:07.285", "00:00:07.768", 
                 "00:00:08.335", "00:00:08.418", "00:00:08.552", 
                 "00:00:08.735", "00:00:08.868", "00:00:08.952",
                 "00:00:09.085", "00:00:09.585", "00:00:09.602", 
                 "00:00:10.035",

                 "00:00:04.918", "00:00:05.685",
                 "00:00:00.000", "00:00:09.052",
                 ["00:00:05.052", "00:00:05.152"],
                 "00:00:07.635",
                 ["00:00:10.435", "00:00:10.518"]],

    "UTAS5313": ["00:00:03.250", "00:00:03.550", "00:00:03.900", 
                 "00:00:04.535", "00:00:04.702", 
                 "00:00:04.935", "00:00:05.052", 
                 "00:00:05.318",
                 "00:00:06.452", "00:00:06.802", "00:00:07.218", 
                 "00:00:07.852", "00:00:07.968", "00:00:08.102", 
                 "00:00:08.252", "00:00:08.402", "00:00:08.502",
                 "00:00:08.602", "00:00:09.018", "00:00:09.135", 
                 "00:00:09.768",

                 "00:00:04.552", "00:00:05.302",
                 "00:00:07.985", "00:00:08.602",
                 ["00:00:04.918", "00:00:05.068"],
                 "00:00:07.152",
                 ["00:00:09.935", "00:00:10.035"]],

    "VOCQ8943": ["00:00:03.533", "00:00:03.767", "00:00:04.118", 
                 "00:00:04.752", "00:00:04.868", 
                 "00:00:05.152", "00:00:05.252", 
                 "00:00:05.468",
                 "00:00:06.768", "00:00:07.118", "00:00:07.552", 
                 "00:00:08.168", "00:00:08.285", "00:00:08.452", 
                 "00:00:08.568", "00:00:08.668", "00:00:08.818",
                 "00:00:08.918", "00:00:09.402", "00:00:09.468", 
                 "00:00:09.835",

                 "00:00:04.768", "00:00:05.468",
                 "00:00:08.302", "00:00:08.818",
                 ["00:00:05.202"],
                 "00:00:07.468",
                 ["00:00:10.285", "00:00:10.385"]],

    "VZEL6331": ["00:00:03.933", "00:00:04.018", "00:00:04.368", 
                 "00:00:05.102", "00:00:05.218", 
                 "00:00:05.502", "00:00:05.618", 
                 "00:00:05.718",
                 "00:00:06.985", "00:00:07.318", "00:00:07.802", 
                 "00:00:08.518", "00:00:08.602", "00:00:00.000", 
                 "00:00:08.918", "00:00:09.018",  "00:00:09.218",
                 "00:00:09.268", "00:00:09.735", "00:00:09.835", 
                 "00:00:10.168",

                 "00:00:05.118", "00:00:05.735",
                 "00:00:08.652", "00:00:09.218",
                 ["00:00:05.435", "00:00:05.552"],
                 "00:00:07.668",
                 ["00:00:10.635", "00:00:10.735"]],

    "YBHU0142": ["00:00:03.933", "00:00:04.085", "00:00:04.452",
                 "00:00:05.235", "00:00:05.452",
                 "00:00:05.635", "00:00:05.735",
                 "00:00:05.918",
                 "00:00:07.202", "00:00:07.535", "00:00:08.018",
                 "00:00:08.585", "00:00:08.685", "00:00:08.818",
                 "00:00:08.985", "00:00:09.118", "00:00:09.218",
                 "00:00:09.335", "00:00:09.835", "00:00:09.868",
                 "00:00:10.168",

                 "00:00:05.252", "00:00:06.018",
                 "00:00:08.718", "00:00:09.318",
                 ["00:00:05.452", "00:00:05.535"],
                 "00:00:07.885",
                 ["00:00:10.718", "00:00:10.785"]],
}


def get_intervals_dict():
    intervals_dict = {}
    for name, times in timestamp_dict.items():    
        timestamp_names = [
            "switch_to_fufu_1", "press_e", "e_damage",
            "hei_dao_1_start", "hei_dao_1_damage",
            "hei_dao_2_start", "hei_dao_2_damage",
            "switch_to_zhong_li_1",

            "switch_to_fufu_2", "hei_dao_3_charge_start", "hei_dao_3_damage",
            "bai_dao_4_start", "bai_dao_4_damage", "bai_dao_4_kou_xue",
            "bai_dao_5_start", "bai_dao_5_damage", "bai_dao_5_kou_xue",
            "bai_dao_6_charge_start", "bai_dao_6_damage", "bai_dao_6_kou_xue",
            "switch_to_zhong_li_2",

            "huang_dao_gen", "huang_dao",
            "mang_dao_gen", "mang_dao",
            "salon_member_first_lst",
            "salon_member_disappear",
            "salon_member_2nd_lst"
        ]

        if len(timestamp_names) != len(times):
            raise Exception("timestamp_names need update!")

        ys_timestamps = {}
        all_times = []
        for idx in range(0, len(times)):
            t = times[idx]
            if isinstance(t, list):
                all_times.extend(t)

                sub_lst = []
                for sub_t in t:
                    sub_lst.append(Ys_Timestamp(sub_t))
                ys_timestamps[timestamp_names[idx]] = sub_lst
            else:
                all_times.append(t)

                ys_timestamps[timestamp_names[idx]] = Ys_Timestamp(t)

        times_set = set(all_times)
        if len(all_times) != len(times_set):
            print("{} has duplicate timestamps: {}".format(
                name, [t for t in all_times if all_times.count(t) > 1]))
        

        switch_to_fufu_1 = ys_timestamps["switch_to_fufu_1"]
        press_e = ys_timestamps["press_e"]
        e_damage = ys_timestamps["e_damage"]
        hei_dao_1_start = ys_timestamps["hei_dao_1_start"]
        hei_dao_1_damage = ys_timestamps["hei_dao_1_damage"]
        hei_dao_2_start = ys_timestamps["hei_dao_2_start"]
        hei_dao_2_damage = ys_timestamps["hei_dao_2_damage"]
        switch_to_zhong_li_1 = ys_timestamps["switch_to_zhong_li_1"]

        switch_to_fufu_2 = ys_timestamps["switch_to_fufu_2"]
        hei_dao_3_charge_start = ys_timestamps["hei_dao_3_charge_start"]
        hei_dao_3_damage = ys_timestamps["hei_dao_3_damage"]
        bai_dao_4_start = ys_timestamps["bai_dao_4_start"]
        bai_dao_4_damage = ys_timestamps["bai_dao_4_damage"]
        bai_dao_4_kou_xue = ys_timestamps["bai_dao_4_kou_xue"]
        bai_dao_5_start = ys_timestamps["bai_dao_5_start"]
        bai_dao_5_damage = ys_timestamps["bai_dao_5_damage"]
        bai_dao_5_kou_xue = ys_timestamps["bai_dao_5_kou_xue"]
        bai_dao_6_charge_start = ys_timestamps["bai_dao_6_charge_start"]
        bai_dao_6_damage = ys_timestamps["bai_dao_6_damage"]
        bai_dao_6_kou_xue = ys_timestamps["bai_dao_6_kou_xue"]
        switch_to_zhong_li_2 = ys_timestamps["switch_to_zhong_li_2"]

        huang_dao_gen = ys_timestamps["huang_dao_gen"]
        huang_dao = ys_timestamps["huang_dao"]
        mang_dao_gen = ys_timestamps["mang_dao_gen"]
        mang_dao = ys_timestamps["mang_dao"]

        salon_member_first_lst = ys_timestamps["salon_member_first_lst"]
        salon_member_disappear = ys_timestamps["salon_member_disappear"]
        salon_member_2nd_lst = ys_timestamps["salon_member_2nd_lst"]
        
        salon_member_first_start = salon_member_first_lst[0]
        salon_member_first_end = salon_member_first_lst[-1]
        salon_member_2nd_start = salon_member_2nd_lst[0]
        salon_member_2nd_end = salon_member_2nd_lst[-1]

        intervals_dict[name] = {
            "切芙芙 - 点按e": press_e - switch_to_fufu_1,
            "点按e - e出伤": e_damage - press_e,
            "点按e - 沙龙成员开始扣血": salon_member_first_start - press_e,

            "点按e - 第一刀刀光": hei_dao_1_start - press_e,
            "第一刀刀光 - 第一刀出伤": hei_dao_1_damage - hei_dao_1_start,
            "第一刀刀光 - 荒刀开始生成": huang_dao_gen - hei_dao_1_start,
            "第一刀刀光 - 荒刀出伤": huang_dao - hei_dao_1_start,

            "第一刀刀光 - 第二刀刀光": hei_dao_2_start - hei_dao_1_start,
            "第二刀刀光 - 第二刀出伤": hei_dao_2_damage - hei_dao_2_start,

            "第二刀刀光 - 切钟离": switch_to_zhong_li_1 - hei_dao_2_start,

            "切芙芙 - 第三刀重击开始": hei_dao_3_charge_start - switch_to_fufu_2,
            "第三刀重击开始 - 沙龙成员消失": salon_member_disappear - hei_dao_3_charge_start,
            "第三刀重击开始 - 第三刀重击出伤": hei_dao_3_damage - hei_dao_3_charge_start,

            "第三刀重击开始 - 第四刀刀光": bai_dao_4_start - hei_dao_3_charge_start,
            "第四刀刀光 - 第四刀出伤": bai_dao_4_damage - bai_dao_4_start,
            "第四刀刀光 - 第四刀扣血": bai_dao_4_kou_xue - bai_dao_4_start,

            "第四刀刀光 - 芒刀开始生成": mang_dao_gen - bai_dao_4_start,
            "第四刀刀光 - 芒刀出伤": mang_dao - bai_dao_4_start,

            "第四刀刀光 - 第五刀刀光": bai_dao_5_start - bai_dao_4_start,
            "第五刀刀光 - 第五刀出伤": bai_dao_5_damage - bai_dao_5_start,
            "第五刀刀光 - 第五刀扣血": bai_dao_5_kou_xue - bai_dao_5_start,

            "第五刀刀光 - 第六刀重击开始": bai_dao_6_charge_start - bai_dao_5_start,
            "第六刀重击开始 - 第六刀重击出伤": bai_dao_6_damage - bai_dao_6_charge_start,
            "第六刀重击开始 - 第六刀重击扣血": bai_dao_6_kou_xue - bai_dao_6_charge_start,

            "第六刀重击开始 - 切钟离": switch_to_zhong_li_2 - bai_dao_6_charge_start,
            "第六刀重击出伤 - 切钟离": switch_to_zhong_li_2 - bai_dao_6_damage,

            "第六刀重击开始 - 沙龙成员开始扣血": salon_member_2nd_start - bai_dao_6_charge_start,

            "沙龙成员第一次行动时间段1": salon_member_first_end - salon_member_first_start,
            "沙龙成员第一次行动时间段2": salon_member_2nd_end - salon_member_2nd_start,
        }

    return intervals_dict


if __name__ == '__main__':
    intervals_dict = get_intervals_dict()

    summary = {}
    for name, intervals in intervals_dict.items():
        for desc, interval in intervals.items():
            if desc in summary:
                summary[desc].append([name, interval])
            else:
                summary[desc] = [[name, interval]]

    for desc, intervals in summary.items():
        sorted_intervals = sorted([i[1] for i in intervals if i[1] != "None"])
        print("{}: {}\n排序：{}\n".format(desc, intervals, sorted_intervals))
